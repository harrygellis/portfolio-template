<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>RSVP Speed Reader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
  body {
    font-family: -apple-system, BlinkMacSystemFont, sans-serif;
    margin: 0;
    padding: 20px;
    background: #0f0f0f;
    color: white;
  }

  h1 {
    font-size: 1.5rem;
    margin-bottom: 10px;
  }

  textarea {
    width: 100%;
    height: 180px;
    font-size: 1rem;
    padding: 10px;
    box-sizing: border-box;
    border-radius: 8px;
    border: none;
    resize: vertical;
  }

  .controls {
    margin-top: 10px;
    display: flex;
    gap: 10px;
    align-items: center;
  }

  input[type="number"] {
    width: 90px;
    font-size: 1rem;
    padding: 6px;
    border-radius: 6px;
    border: none;
  }

  button {
    font-size: 1rem;
    padding: 10px 14px;
    border-radius: 8px;
    border: none;
    background: #1e88ff;
    color: white;
  }

  #reader {
    margin-top: 30px;
    height: 200px;
    display: flex;
    justify-content: center;
    align-items: center;
    font-size: 3rem;
    font-weight: 600;
    border-radius: 12px;
    background: #181818;
  }

  .pivot {
    color: #ff5252;
  }
</style>
</head>

<body>

<h1>RSVP Speed Reader</h1>

<p>Paste text below, or select text on this page and press Start.</p>

<textarea id="textInput" placeholder="Paste text hereâ€¦"></textarea>

<div class="controls">
  <label>WPM</label>
  <input type="number" id="wpm" value="400" min="100" max="1200">
  <button onclick="startRSVP()">Start</button>
  <button onclick="stopRSVP()">Stop</button>
</div>

<div id="reader">Ready</div>

<script>
let words = [];
let index = 0;
let timer = null;

function pivotWord(word) {
  if (word.length <= 1) return word;
  const pivot = Math.floor(word.length / 2);
  return (
    word.slice(0, pivot) +
    '<span class="pivot">' + word[pivot] + '</span>' +
    word.slice(pivot + 1)
  );
}

function startRSVP() {
  stopRSVP();

  let text = window.getSelection().toString();
  if (!text.trim()) {
    text = document.getElementById("textInput").value;
  }

  words = text.replace(/\s+/g, " ").trim().split(" ");
  index = 0;

  const wpm = parseInt(document.getElementById("wpm").value);
  const delay = 60000 / wpm;

  if (words.length === 0) return;

  timer = setInterval(() => {
    if (index >= words.length) {
      stopRSVP();
      return;
    }
    document.getElementById("reader").innerHTML =
      pivotWord(words[index]);
    index++;
  }, delay);
}

function stopRSVP() {
  if (timer) clearInterval(timer);
  timer = null;
}
</script>

</body>
</html>
